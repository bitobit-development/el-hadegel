/**
 * MK Handle Mapping
 *
 * Auto-generated mapping of Knesset MK IDs to X/Twitter handles.
 *
 * Generated: 2025-11-30T13:27:53.768Z (including 54 manually imported accounts)
 * Source: docs/mk-coalition/coalition-members.csv
 *
 * DO NOT EDIT MANUALLY - Run `npx tsx scripts/generate-mk-handle-mapping.ts` to regenerate.
 */

/**
 * Map of Knesset MK ID to X/Twitter handle (without @ prefix)
 *
 * Example: 771 -> "avidichter" (Avi Dichter)
 */
export const MK_HANDLE_MAP: Record<string, string> = {
  "1": "YuliEdelstein",
  "35": "mk_moshe_gafni",
  "41": "ariyederi",
  "950": "SharrenHaskel", // Sharren Haskel (Opposition - National Right) - Added manually
  "69": "Israel_katz",
  "90": "netanyahu",
  "723": "GilaGamliel",
  "751": "yakmargi",
  "754": "YisraelEichler",
  "771": "avidichter",
  "826": "yariv_levin",
  "861": "Pikeaccount",
  "884": "oritstrock",
  "906": "BentzurYoav",
  "914": "davidbitan",
  "953": "AmirOhana",
  "957": "malkielim82",
  "974": "NirBarkat",
  "976": "OfirKatzMK",
  "977": "ofir_sofer",
  "987": "ArielKallner",
  "992": "ettyatia",
  "996": "TESLERYANKY",
  "1002": "GolanMay",
  "1008": "rbl_msh38078",
  "1011": "shlomo_karhi",
  "1018": "shitrit_keti",
  "1029": "Abutbulm",
  "1039": "BussoUriel",
  "1043": "yossitaieb",
  "1044": "HaleviAmit",
  "1045": "nissimv",
  "1055": "haiimaemek",
  "1056": "itamarbengvir",
  "1059": "GalitDistel",
  "1060": "michalwoldiger",
  "1063": "AVI_MAOZ",
  "1067": "rothmar",
  "1090": "MKOhadTal",
  "1095": "BismuthBoaz",
  "1096": "Eliyahu_a",
  "1098": "TallyGotliv",
  "1099": "DOVRUTGoldknopf",
  "1100": "elidallal32",
  "1101": "ShalomDanino",
  "1102": "ItshakWaserlauf",
  "1105": "hanochmilwidsky",
  "1107": "Moshe_solomon_",
  "1108": "limor_sonhrmelh",
  "1109": "MosheSaada1",
  "1110": "tzvikafoghel",
  "1111": "revivoeliyahu",
  "1114": "Yitzik_kroizer",
  "1116": "dillouz",
  "1121": "tzvisuccot",
  "1122": "Tsega__Melaku",
  "1123": "OsherShkalim",
  "1124": "moshiko_passal",
  "1125": "sassong24",
  "1126": "AvichayBuaron",
  "1128": "afefameenabed",
  "214": "AvigdorLiberman", // אביגדור ליברמן - Imported,
  "978": "FarkashOrit", // אורית פרקש הכהן - Imported,
  "208": "Ahmad_tibi", // אחמד טיבי - Imported,
  "938": "AyOdeh", // איימן עודה - Imported,
  "1032": "khatib_eman", // אימאן ח'טיב יאסין - Imported,
  "981": "EitanGinzburg", // איתן גינזבורג - Imported,
  "854": "AKRAMHASSON", // אכרם חסון - Imported,
  "982": "alonschuster_mk", // אלון שוסטר - Imported,
  "899": "Elazar_stern", // אלעזר שטרן - Imported,
  "1068": "Efratrayten1", // אפרת רייטן מרום - Imported,
  "872": "BToporovsky", // בועז טופורובסקי - Imported,
  "988": "gantzbe", // בני גנץ - Imported,
  "1066": "KarivGilad", // גלעד קריב - Imported,
  "1094": "DebbieBiton", // דבי ביטון - Imported,
  "1093": "WAlhwashla", // ואליד אלהואשלה - Imported,
  "1026": "Waleedt68", // ווליד טאהא - Imported,
  "1049": "VladimirBeliak", // ולדימיר בליאק - Imported,
  "768": "zeev_elkin", // זאב אלקין - Imported,
  "1000": "hilitrooper", // חילי טרופר - Imported,
  "837": "hamad_amar11", // חמד עמאר - Imported,
  "1076": "MazarskyTatiana", // טטיאנה מזרסקי - Imported,
  "878": "yairlapid", // יאיר לפיד - Imported,
  "1103": "YasserHujerat", // יאסר חוג'יראת - Imported,
  "994": "evgenysova", // יבגני סובה - Imported,
  "995": "YSegalovitz", // יואב סגלוביץ - Imported,
  "956": "YuliaMalinovsky", // יוליה מלינובסקי - Imported,
  "998": "YoraiLahav", // יוראי להב הרצנו - Imported,
  "1079": "Yasminsfridman", // יסמין פרידמן - Imported,
  "1048": "yael_ron", // יעל רון בן משה - Imported,
  "1127": "Yaron_Levi_by", // ירון לוי - Imported,
  "874": "MKmeircohen", // מאיר כהן - Imported,
  "103": "Porush", // מאיר פרוש - Imported,
  "1091": "MattiSarfatti", // מטי צרפתי הרכבי - Imported,
  "1003": "MichaelBiton4", // מיכאל מרדכי ביטון - Imported,
  "1004": "MichalShir", // מיכל שיר סגמן - Imported,
  "876": "MKMickeyLevy", // מיקי לוי - Imported,
  "915": "Meravbenari", // מירב בן ארי - Imported,
  "1006": "cohen_meirav", // מירב כהן - Imported,
  "1088": "BuskilaMishel", // מישל בוסקילה - Imported,
  "1007": "mnsorabbas", // מנסור עבאס - Imported,
  "881": "MeravMichaeli", // מרב מיכאלי - Imported,
  "1050": "MosheTurpaz", // משה טור פז - Imported,
  "1112": "naorshiri", // נאור שירי - Imported,
  "1082": "naamalazimi", // נעמה לזימי - Imported,
  "1085": "simondav14", // סימון דוידסון - Imported,
  "948": "AidaTuma", // עאידה תומא סלימאן - Imported,
  "951": "oded_forer", // עודד פורר - Imported,
  "1013": "ofercass", // עופר כסיף - Imported,
  "905": "pnina_tamano_sh", // פנינה תמנו - Imported,
  "860": "KElharrar", // קארין אלהרר - Imported,
  "1061": "MKRonKatz", // רון כץ - Imported,
  "1022": "Ram_Ben_Barak", // רם בן ברק - Imported,
  "1118": "Shellytalmeron", // שלי טל מירון - Imported,
  "1106": "SharonNir11", // שרון ניר - Imported
};

/**
 * Map of Knesset MK ID to Hebrew name (for debugging)
 */
export const MK_NAME_MAP: Record<string, string> = {
  "1": "יולי יואל אדלשטיין",
  "35": "משה גפני",
  "41": "אריה מכלוף דרעי",
  "950": "שרן מרים השכל", // Sharren Haskel - Added manually
  "69": "ישראל כץ",
  "90": "בנימין נתניהו",
  "723": "גילה גמליאל",
  "751": "יעקב מרגי",
  "754": "ישראל אייכלר",
  "771": "אבי דיכטר",
  "826": "יריב לוין",
  "861": "יעקב אשר",
  "884": "אורית סטרוק",
  "906": "יואב בן צור",
  "914": "דוד ביטן",
  "953": "אמיר אוחנה",
  "957": "מיכאל מלכיאלי",
  "974": "ניר ברקת",
  "976": "אופיר כץ",
  "977": "אופיר סופר",
  "987": "אריאל קלנר",
  "992": "חוה אתי עטייה",
  "996": "יעקב טסלר",
  "1002": "מאי גולן",
  "1008": "משה ארבל",
  "1011": "שלמה קרעי",
  "1018": "קטי קטרין שטרית",
  "1029": "משה אבוטבול",
  "1039": "אוריאל בוסו",
  "1043": "יוסף טייב",
  "1044": "עמית הלוי",
  "1045": "ניסים ואטורי",
  "1055": "חיים ביטון",
  "1056": "איתמר בן גביר",
  "1059": "גלית דיסטל אטבריאן",
  "1060": "מיכל מרים וולדיגר",
  "1063": "אבי מעוז",
  "1067": "שמחה רוטמן",
  "1090": "אוהד טל",
  "1095": "בועז ביסמוט",
  "1096": "עמיחי אליהו",
  "1098": "טלי גוטליב",
  "1099": "יצחק גולדקנופ",
  "1100": "אלי דלל",
  "1101": "שלום דנינו",
  "1102": "יצחק שמעון וסרלאוף",
  "1105": "חנוך דב מלביצקי",
  "1107": "משה סולומון",
  "1108": "לימור סון הר מלך",
  "1109": "משה סעדה",
  "1110": "צביקה פוגל",
  "1111": "אליהו רביבו",
  "1114": "יצחק קרויזר",
  "1116": "דן אילוז",
  "1121": "צבי ידידיה סוכות",
  "1122": "צגה צגנש מלקו",
  "1123": "אושר שקלים",
  "1124": "משה פסל",
  "1125": "ששון ששי גואטה",
  "1126": "אביחי אברהם בוארון",
  "1128": "עפיף עבד",
  "214": "אביגדור ליברמן", // Imported,
  "978": "אורית פרקש הכהן", // Imported,
  "208": "אחמד טיבי", // Imported,
  "938": "איימן עודה", // Imported,
  "1032": "אימאן ח'טיב יאסין", // Imported,
  "981": "איתן גינזבורג", // Imported,
  "854": "אכרם חסון", // Imported,
  "982": "אלון שוסטר", // Imported,
  "899": "אלעזר שטרן", // Imported,
  "1068": "אפרת רייטן מרום", // Imported,
  "872": "בועז טופורובסקי", // Imported,
  "988": "בני גנץ", // Imported,
  "1066": "גלעד קריב", // Imported,
  "1094": "דבי ביטון", // Imported,
  "1093": "ואליד אלהואשלה", // Imported,
  "1026": "ווליד טאהא", // Imported,
  "1049": "ולדימיר בליאק", // Imported,
  "768": "זאב אלקין", // Imported,
  "1000": "חילי טרופר", // Imported,
  "837": "חמד עמאר", // Imported,
  "1076": "טטיאנה מזרסקי", // Imported,
  "878": "יאיר לפיד", // Imported,
  "1103": "יאסר חוג'יראת", // Imported,
  "994": "יבגני סובה", // Imported,
  "995": "יואב סגלוביץ", // Imported,
  "956": "יוליה מלינובסקי", // Imported,
  "998": "יוראי להב הרצנו", // Imported,
  "1079": "יסמין פרידמן", // Imported,
  "1048": "יעל רון בן משה", // Imported,
  "1127": "ירון לוי", // Imported,
  "874": "מאיר כהן", // Imported,
  "103": "מאיר פרוש", // Imported,
  "1091": "מטי צרפתי הרכבי", // Imported,
  "1003": "מיכאל מרדכי ביטון", // Imported,
  "1004": "מיכל שיר סגמן", // Imported,
  "876": "מיקי לוי", // Imported,
  "915": "מירב בן ארי", // Imported,
  "1006": "מירב כהן", // Imported,
  "1088": "מישל בוסקילה", // Imported,
  "1007": "מנסור עבאס", // Imported,
  "881": "מרב מיכאלי", // Imported,
  "1050": "משה טור פז", // Imported,
  "1112": "נאור שירי", // Imported,
  "1082": "נעמה לזימי", // Imported,
  "1085": "סימון דוידסון", // Imported,
  "948": "עאידה תומא סלימאן", // Imported,
  "951": "עודד פורר", // Imported,
  "1013": "עופר כסיף", // Imported,
  "905": "פנינה תמנו", // Imported,
  "860": "קארין אלהרר", // Imported,
  "1061": "רון כץ", // Imported,
  "1022": "רם בן ברק", // Imported,
  "1118": "שלי טל מירון", // Imported,
  "1106": "שרון ניר", // Imported
};

/**
 * Get X handle for a given Knesset MK ID
 *
 * @param mkId - Knesset MK ID (e.g., "771" or 771)
 * @returns X handle without @ prefix, or undefined if not found
 */
export function getMKHandle(mkId: string | number): string | undefined {
  const id = String(mkId);
  return MK_HANDLE_MAP[id];
}

/**
 * Get MK ID from X handle
 *
 * @param handle - X handle (with or without @ prefix)
 * @returns Knesset MK ID, or undefined if not found
 */
export function getMKIdFromHandle(handle: string): string | undefined {
  const cleanHandle = handle.startsWith('@') ? handle.substring(1) : handle;
  const lowerHandle = cleanHandle.toLowerCase();

  for (const [mkId, mappedHandle] of Object.entries(MK_HANDLE_MAP)) {
    if (mappedHandle.toLowerCase() === lowerHandle) {
      return mkId;
    }
  }

  return undefined;
}

/**
 * Check if a URL is from a known MK's X account
 *
 * @param url - URL to check (e.g., "https://x.com/avidichter/status/123")
 * @returns MK ID if found, undefined otherwise
 */
export function getMKIdFromXUrl(url: string): string | undefined {
  try {
    const urlObj = new URL(url);

    // Check if it's an X/Twitter URL
    if (!urlObj.hostname.includes('twitter.com') && !urlObj.hostname.includes('x.com')) {
      return undefined;
    }

    // Extract handle from pathname (e.g., "/avidichter/status/123" -> "avidichter")
    const pathParts = urlObj.pathname.split('/').filter(Boolean);
    if (pathParts.length === 0) {
      return undefined;
    }

    const handle = pathParts[0];
    return getMKIdFromHandle(handle);
  } catch {
    return undefined;
  }
}
